<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</title>

<link rel="stylesheet" href="style.css">
<script src="cart.js"></script>

<style>
.empty{
text-align:center;
padding:30px;
font-size:18px;
color:#777;
}
</style>

</head>

<body>

<header>
  <div>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</div>
  <a href="index.html" class="cart-icon">â¬… Ø§Ù„Ø±Ø¬ÙˆØ¹</a>
</header>

<div class="cart-container">

  <div id="cartItems"></div>

  <div class="total-box" id="totalBox">
    Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0 Ø¬Ù†ÙŠÙ‡
  </div>

  <h3 style="margin-top:25px;">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>

  <input type="text" id="custName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
  <input type="text" id="custPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†">
  <input type="text" id="custAddress" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„">

  <button class="send-btn" onclick="sendOrder()">
    Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
  </button>

  <button class="send-btn" 
          style="background:#d32f2f;margin-top:10px;" 
          onclick="clearCart()">
    Ø¥ÙØ±Ø§Øº Ø§Ù„Ø³Ù„Ø©
  </button>

</div>

<script>

function loadCart(){

let cart = JSON.parse(localStorage.getItem("cart")) || [];
let box = document.getElementById("cartItems");
let total = 0;

box.innerHTML = "";

if(cart.length === 0){
box.innerHTML = "<div class='empty'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>";
document.getElementById("totalBox").innerText = "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0 Ø¬Ù†ÙŠÙ‡";
return;
}

cart.forEach(item => {

let itemTotal = item.price * item.quantity;
total += itemTotal;

box.innerHTML += `
<div class="cart-item">
  <div>
    <strong>${item.name}</strong><br>
    ${item.quantity} Ã— ${item.price} Ø¬Ù†ÙŠÙ‡
  </div>
  <div>
    ${itemTotal} Ø¬Ù†ÙŠÙ‡
  </div>
</div>
`;

});

document.getElementById("totalBox").innerText = "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: " + total + " Ø¬Ù†ÙŠÙ‡";
}

function sendOrder(){

let name = document.getElementById("custName").value.trim();
let phone = document.getElementById("custPhone").value.trim();
let address = document.getElementById("custAddress").value.trim();

let cart = JSON.parse(localStorage.getItem("cart")) || [];

if(cart.length === 0){
alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
return;
}

if(!name || !phone || !address){
alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙƒØ§Ù…Ù„Ø©");
return;
}

let totalText = document.getElementById("totalBox").innerText;

let message = "ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø³Ù„Ø© Ù…Ø§Ø±ÙƒØª:\n\n";

cart.forEach(item=>{
message += `${item.name} Ã— ${item.quantity}\n`;
});

message += `\n${totalText}\n\n`;
message += `ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}\n`;
message += `ğŸ“ Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†: ${phone}\n`;
message += `ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}`;

let url = "https://wa.me/201551489292?text=" + encodeURIComponent(message);

window.open(url, "_blank");
}

function clearCart(){
localStorage.removeItem("cart");
loadCart();
updateCartCount();
}

loadCart();

</script>

</body>
</html>
